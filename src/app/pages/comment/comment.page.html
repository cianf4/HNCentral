<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/news"></ion-back-button>
    </ion-buttons>
    <ion-title>Commento di {{ comment?.by }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-card *ngIf="comment && parent && replies">
    <ion-card color="light">
      <ion-card-content>
        <ion-card-subtitle>
          <ion-text color="medium">In risposta all'articolo di <ion-text class="by">{{ parent.by }}</ion-text> del {{ parent.readableDate }}</ion-text>
        </ion-card-subtitle>
        <ion-card-title>{{ parent.title }}</ion-card-title>
        <ion-item lines="none" color="light">
          <ion-text slot="start" color="medium" class="commenti">
            <i><ion-icon name="chatbox-ellipses-outline"></ion-icon> {{ parent.descendants }} commenti</i>
          </ion-text>
          <ion-text button [routerLink]="['/news', parent.id]" class="link" slot="end">
            <u><i><ion-icon name="newspaper-outline"></ion-icon> Vai all'articolo</i></u>
          </ion-text>
        </ion-item>
      </ion-card-content>
    </ion-card>
    <ion-card color="light">
      <ion-card-header>
        <ion-label color="medium">
          Commento di <ion-text class="by">{{ comment.by }}</ion-text> • {{ comment.readableDate }}
        </ion-label>
        <ion-label color="medium">
          <ion-icon name="arrow-redo-outline"></ion-icon> {{ comment.repliesCount }} risposte
        </ion-label>
      </ion-card-header>
      <ion-card-content>
        <ion-text [innerHTML]="comment.text" color="dark"></ion-text><br>
        <ion-card *ngFor="let reply of replies" lines="full">
          <ion-card-content>
            <ion-text color="medium"><p><ion-icon name="arrow-redo-outline"></ion-icon> <ion-text class="by"> {{ reply.by }}</ion-text> • {{ reply.readableDate }}</p></ion-text>
            <ion-text [innerHTML]="reply.text" color="dark"></ion-text>
          </ion-card-content>
          <ion-card *ngIf="reply.repliesCount > 0">
            <ion-list lines="full">
              <ion-item *ngFor="let nestedReply of reply.replies">
                <ion-label>
                  <ion-text color="medium"><p><ion-icon name="arrow-redo-outline"></ion-icon> <ion-text class="by"> {{ nestedReply.by }}</ion-text> • {{ nestedReply.readableDate }}</p></ion-text>
                  <ion-text [innerHTML]="nestedReply.text"></ion-text>
                </ion-label>
              </ion-item>
            </ion-list>
          </ion-card>
        </ion-card>
      </ion-card-content>
    </ion-card>
  </ion-card>
</ion-content>

<!--
      <ion-card-content>
        <ion-text [innerHTML]="comment.text" color="dark"></ion-text><br>
        <ion-list *ngIf="comment.repliesCount > 0" lines="full">
          <ion-item *ngFor="let reply of replies">
            <ion-label>
              <ion-text color="medium"><p>Risposta di <ion-text class="by">{{ reply.by }}</ion-text> • ({{ reply.readableDate }})</p></ion-text>
              <ion-text [innerHTML]="reply.text"></ion-text>
            </ion-label>
          </ion-item>
        </ion-list>
      </ion-card-content>
-->
